# Connection establishment

A typical P2S connection consists of the following procedures:

- The client establishes a TCP/IP connection with TLS to the server
- The client sends its Gurgle protocol version, the server replies with its version.
- The client sends "upgrade request" packet and the server responds to it.
- A virtual stream with ID 0 is automatically allocated.
- The client authenticates.
- The server pushes offline messages to client. The client responds upon successful receiving.
- The client sends a presence packet.
- The client requests roaster and updates contacts information.

Then the Gurgle session is set up and stand by.

// TODO
